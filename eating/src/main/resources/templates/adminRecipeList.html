<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorator="~{fragments/layout}">
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="//code.jquery.com/jquery-3.3.1.min.js"></script>
<script>


	// 체크박스
	$(document).ready(function() {
		$("#submitfrm").on("click", function() {
			var param = new Array;
			$(".chkclass:checked").each(function() {
				param.push($("#id").val())
			});
			$("#form").attr("action", "adminRecipedelete");
			$("#form").submit();
		});
	});

	$(function() {
		var chkObj = document.getElementsByName("id");
		var rawCnt = chkObj.length;

		$("input[name='allCheck']").click(function() {
			var chk_listArr = $("input[name='id']");
			for (var i = 0; i < chk_listArr.length; i++) {
				chk_listArr[i].checked = this.checked;
			}
		});
		$("input[name='id']").click(function() {
			if ($("input[name='id']:checked").length == rowCnt) {
				$("input[name='allCheck']")[0].checked = true;
			} else {
				$("input[name='allCheck']")[0].checked = false;
			}
		});
	});

	var checkRows = $("[name='allCheck']:checked");
	for (var i = checkRows.length - 1; i > -1; i--) {
		checkRows.eq(i).closest('tr').remove();
	}

</script>
<th:block layout:fragment="content">
	<div class="container">

	<h1>레시피 게시판</h1>

	<div>
		<form id=form action="" method="post">
			<table border="1">
				<thead>
					<tr>
						<th scope="col"><input id="allcheck" type="checkbox" name="allCheck"></th>
						<th>레시피명</th>
						<th>내용</th>
						<th>작성일</th>
						<th>작성자</th>
						<th>카테고리</th>
						<th>추천</th>
					</tr>
				</thead>

				<tr th:each="recipe, index : ${selectAll}">
				
					<!-- 체크박스 -->
					<td class="header" width="30">
						<div class="chkclass">
							<input name="id" type="checkbox" id="id" class="id" th:value="${recipe.id}">
						</div>
					</td>
					
					<!-- 레시피명, 내용, 작성일, 작성자, 카테고리, 추천 -->
					<td>
						<input type="text" th:id="name+${index.count}" class="name" name="name" th:value="${recipe.name}" readonly>
					</td>
					
					<td>
						<input type="text" th:id="createDate+${index.count}" class="createDate" name="createDate" th:value="${recipe.createDate}" readonly>
					</td>
					
					<td>
						<input type="text" th:id="recommend+${index.count}" class="recommend" name="recommend" th:value="${recipe.recommend}" readonly>
					</td>		
				</tr>
			</table>
			<button id="submitfrm">삭제</button>
		</form>
			<button onclick="location.href='/recipe/new'">등록</button>

	
	</div>
    </div>
</th:block>

</html>