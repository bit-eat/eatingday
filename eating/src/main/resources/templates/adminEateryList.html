<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorator="~{fragments/layout}">
<title>Insert title here</title>
<script src="//code.jquery.com/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="/js/recipeTag.js"></script>
<script>


	// 체크박스
	$(document).ready(function() {
		$("#submit").on("click", function() {
			var param = new Array;
			$(".chkclass:checked").each(function() {
				param.push($("#id").val())
			});
			$("#form").attr("action", "adminEaterydelete");
			$("#form").submit();
		});
	});

	$(function() {
		var chkObj = document.getElementsByName("id");
		var rawCnt = chkObj.length;

		$("input[name='allCheck']").click(function() {
			var chk_listArr = $("input[name='id']");
			for (var i = 0; i < chk_listArr.length; i++) {
				chk_listArr[i].checked = this.checked;
			}
		});
		$("input[name='id']").click(function() {
			if ($("input[name='id']:checked").length == rowCnt) {
				$("input[name='allCheck']")[0].checked = true;
			} else {
				$("input[name='allCheck']")[0].checked = false;
			}
		});
	});

	var checkRows = $("[name='allCheck']:checked");
	for (var i = checkRows.length - 1; i > -1; i--) {
		checkRows.eq(i).closest('tr').remove();
	}

</script>

<th:block layout:fragment="content">
	<div class="container">
		
			<h1>음식점 게시판</h1>

			<div>
				<form id=form action="" method="post">
					<table border="1">
						<thead>
							<tr>
								<th scope="col"><input id="allcheck" type="checkbox" name="allCheck"></th>
								<th>상호명</th>
								<th>내용</th>
								<th>주소</th>
								<th>전화번호</th>
								<th>카테고리</th>
								<th>추천</th>
							</tr>
						</thead>
		
						<tr th:each="eatery, index : ${selectAll}">
						
							<!-- 체크박스 -->
							<td class="header" width="30">
								<div class="chkclass">
									<input name="id" type="checkbox" id="id" class="id" th:value="${eatery.id}">
								</div>
							</td>
							
							<!-- 상호명, 내용, 주소, 전화번호, 카테고리, 추천 -->
							<td>
								<input type="text" th:id="name+${index.count}" class="name" name="name" th:value="${eatery.name}" readonly>
							</td>
							<td>
								<input type="text" th:id="content+${index.count}" class="content" name="content" th:value="${eatery.content}" readonly>
							</td>
							<td>
								<input type="text" th:id="address+${index.count}" class="address" name="address" th:value="${eatery.address}" readonly>
							</td>
							<td>
								<input type="text" th:id="phoneNumber+${index.count}" class="phoneNumber" name="phoneNumber" th:value="${eatery.phoneNumber}" readonly>
							</td>
							<td>
								<input type="text" th:id="categoryName+${index.count}" class="categoryName" name="categoryName" th:value="${eatery.categoryName}" readonly>
							</td>
							<td>
								<input type="text" th:id="recommend+${index.count}" class="recommend" name="recommend" th:value="${eatery.recommend}" readonly>
							</td>		
						</tr>
					</table>
					<button id="submit">삭제</button>
				</form>
					<button onclick="location.href='/insert'">등록</button>
		
			</div>
    </div>
</th:block>
</html>